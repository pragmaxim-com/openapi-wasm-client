<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rust WASM Client</title>
</head>

<body>
    <h3>Check the browser console for output</h3>
    <script type="module">
        import init, { store_block, store_address, get_blocks, get_addresses } from './ehttp-client/pkg/ehttp_client.js';

        async function run() {
            await init();

            // Example: Store a block
            const block = { block_id: "00000000000000000008c14f2c8fbc000d4d1efb1a1c4f7e13e7d233e4513f9b", height: 654321 };
            try {
                await store_block(block);
                console.log("Block stored");
            } catch (error) {
                console.error("Error storing block:", error);
            }

            // Example: Store an address
            const address = { address: "addr1q9w7j8c9g8c9g7j8w7j8c9g8c9g7j8c9g8c9g8c9g8c9g8c9g8c9g8c9g8c9g8", balance: 100000 };
            try {
                await store_address(address);
                console.log("Address stored");
            } catch (error) {
                console.error("Error storing address:", error);
            }

            // Example: Get blocks
            try {
                const blocks = await get_blocks();
                console.log("Retrieved blocks:", blocks);
            } catch (error) {
                console.error("Error retrieving blocks:", error);
            }

            // Example: Get addresses
            try {
                const addresses = await get_addresses();
                console.log("Retrieved addresses:", addresses);
            } catch (error) {
                console.error("Error retrieving addresses:", error);
            }
        }

        run();
    </script>
</body>

</html>